<!doctype html>
<html lang="en">
    <head>
        <title>Coincidence</title>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />

        <link href="dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="dist/css/custom.css" rel="stylesheet">
        <script src="dist/js/handlebars.min-v4.7.8.js"></script>   
        <script src="dist/js/vanilla.js"></script>
    </head>

    <body>
       
	<script id="navbar-template" type="text/x-handlebars-template">
      	  {{#> navbar Cart='active'}}

      	  {{/navbar}}
        </script>
	<div id="navbar"></div>

    <div class="container">
        <main>
          <div class="py-5 text-center">
            <h1>Checkout</h1>
          </div>
      
          <div class="row g-5">
            <div class="col-md-5 col-lg-4 order-md-last">
              <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-primary">Your cart</span>
                <span class="badge bg-primary rounded-pill" id="item_count">3</span>
              </h4>
              <ul class="list-group mb-3" id="cart_hb">

              </ul>
            </div>
            <div class="col-md-7 col-lg-8">
              <h4 class="mb-3">Billing address</h4>
              <form class="needs-validation" novalidate>
                <div class="row g-3">
                  <div class="col-sm-6">
                    <label for="firstName" class="form-label">First name</label>
                    <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
                  </div>
      
                  <div class="col-sm-6">
                    <label for="lastName" class="form-label">Last name</label>
                    <input type="text" class="form-control" id="lastName" placeholder="" value="" required>
                  </div>
      
                  <div class="col-12">
                    <label for="email" class="form-label">Email <span class="text-muted">(Optional)</span></label>
                    <input type="email" class="form-control" id="email" placeholder="you@example.com">
                  </div>

                  <div class="col-12">
                    <label for="country" class="form-label">Country or Region</label>
                    <input type="text" class="form-control" id="country" placeholder="Germany" required>
                  </div>
      
                  <div class="col-sm-6">
                    <label for="address" class="form-label">Address</label>
                    <input type="text" class="form-control" id="address" placeholder="Willy-Brandt-Straße 1" required>
                  </div>

                  <div class="col-sm-6">
                    <label for="address2" class="form-label">Addition to Address <span class="text-muted">(Optional)</span></label>
                    <input type="text" class="form-control" id="address2" placeholder="">
                  </div>

                  <div class="col-sm-6">
                    <label for="zip" class="form-label">Zip</label>
                    <input type="text" class="form-control" id="zip" placeholder="10557" required>
                  </div>

                  <div class="col-sm-6">
                    <label for="place" class="form-label">Place</label>
                    <input type="text" class="form-control" id="place" placeholder="Berlin" required>
                  </div>
            
                <hr class="my-4">
            
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="save-info">
                  <label class="form-check-label" for="save-info">Save this information for next time</label>
                </div>
      
                <hr class="my-4">
      
                <h4 class="mb-3">Payment</h4>
      
                <div class="my-3">
                  <div class="form-check">
                    <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked required>
                    <label class="form-check-label" for="credit">Credit card</label>
                  </div>
                  <div class="form-check">
                    <input id="paypal" name="paymentMethod" type="radio" class="form-check-input" required>
                    <label class="form-check-label" for="paypal">PayPal</label>
                  </div>
                  <div class="form-check">
                    <input id="klarna" name="paymentMethod" type="radio" class="form-check-input" required>
                    <label class="form-check-label" for="klarna">Klarna</label>
                  </div>
                </div>
      
                <div class="row gy-3">
                  <div class="col-md-6">
                    <label for="cc-name" class="form-label">Name on card</label>
                    <input type="text" class="form-control" id="cc-name" placeholder="" required>
                    <small class="text-muted">Full name as displayed on card</small>
                  </div>
      
                  <div class="col-md-6">
                    <label for="cc-number" class="form-label">Credit card number</label>
                    <input type="text" class="form-control" id="cc-number" placeholder="" required>
                  </div>
      
                  <div class="col-md-3">
                    <label for="cc-expiration" class="form-label">Expiration</label>
                    <input type="text" class="form-control" id="cc-expiration" placeholder="" required>
                  </div>
      
                  <div class="col-md-3">
                    <label for="cc-cvv" class="form-label">CVV</label>
                    <input type="text" class="form-control" id="cc-cvv" placeholder="" required>
                  </div>
                </div>
      
                <hr class="my-4">
      
                <button class="w-100 btn btn-primary btn-lg" type="submit">Buy now</button>
              </form>
            </div>
          </div>
        </main>
      
      <script id="cart_item_template" type="text/x-handlebars-template">
        {{#each ord}}
        <li class="list-group-item d-flex justify-content-between lh-sm">
            <div class="col">
              <img src="{{this.image}}" width="100%" style="margin-top: auto; margin-bottom: auto;">
            </div>
            <div class="col">
              <h6 class="my-0">{{this.name}}</h6>
            </div>
            <div class="col" style="margin: auto;">
                <span class="text-muted m-2">{{this.amount}} x $ {{this.curValueRound}}</span>
            </div>
            <div class="col" style="width: 50%; margin: auto; text-align: right;">
                <span class="item_total text-muted">$ {{this.end_price}}</span>
            </div>
        </li>
        {{/each}}

        <li class="list-group-item d-flex justify-content-between bg-light">
            <div class="text-success">
                <h6 class="my-0">Promo code</h6>
                <small id="discount_code"></small>
            </div>
            <span class="text-success" id="discount">−$ 0</span>
        </li>

        <li class="list-group-item d-flex justify-content-between">
            <span>Total (USD)</span>
            <strong id="total">$</strong>
        </li>
    </script>
  
    <script>
	    renderPartials()

      const order = getOrders().ord;
      $ID("item_count").innerText = order.length;
      for (let ord of order)
        ord.curValueRound = round(ord.curValue + 0.005, 2);
      console.log(order);
      render(cart_item_template, cart_hb, {ord: order})
      total.innerText = "$ " + round(order.reduce((s, o) => s + o.end_price, 0), 2);
    </script>

<script id="footer-template" type="text/x-handlebars-template">
      	  {{#> footer}}
  
      	  {{/footer}}
        </script>
	<div id="footer"></div>

        <script src="dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
